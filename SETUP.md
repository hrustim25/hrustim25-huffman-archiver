# Настройка окружения

Для решения задач вам потребуется ноутбук с unix окружением. Лучше всего использовать linux.
OSX тоже должен работать.

Можно использовать Windows, но для компиляции и запуска нужно будет использовать [WSL](https://www.jetbrains.com/help/clion/how-to-use-wsl-development-environment-in-clion.html).

Мы рекомендуем использовать Ubuntu версии **20.04**. Мы проверяем
все задачи на этой версии убунты, и если вы будете использовать эту же версию
локально, то вы избежите проблем со старыми версиями компиляторов. Мы компилируем
всё с **clang-11**.

## Предупреждение

Система предназначена только для сдачи заданий. Любая замеченная попытка нарушить работу системы или обойти тесты приведет к обнулению оценки за всю неделю.

## Регистрация в системе

1. Создайте аккаунт на https://gitlab.com/. Если аккаунт уже есть и вы готовы решать с него задачи, новый создавать не надо.
1. Добавьте ssh-ключ в аккаунт:
    * Сгенерируйте ssh ключ, если у вас его еще нет.
     ```
     ssh-keygen -N "" -f ~/.ssh/id_rsa
     ```
    * Скопируйте содержимое файла id_rsa.pub (`cat ~/.ssh/id_rsa.pub`) в https://gitlab.com/-/profile/keys
    * Проверьте, что ssh ключ работает. Выполните команду `ssh git@gitlab.com`. Вы должны увидеть такое приветствие:
     ```
     $ ssh git@gitlab.com
     PTY allocation request failed on channel 0
     Welcome to GitLab, $USERNAME!
     Connection to gitlab.com closed.
     ```

1. Зарегистрируйтесь на https://pilot.cpp-hse.org. Секрет для регистрации выдаст семинарист в чате семинарской группы. Авторизация на сайте происходит через GitLab; для входа используйте подготовленный выше аккаунт GitLab.

1. Для вас создастся пустой репозиторий, ссылка на который доступна из сайта с дедлайнами. Проверьте, что вы имеете доступ.

## Подготовка локального репозитория

1. Склонируйте репозиторий с задачами.
   ```
   git clone https://gitlab.com/levanovd/cpp-pilot-hse
   ```

   Команда `git clone` создаст директорию `cpp-pilot-hse` и запишет туда все файлы из этого репозитория.
   Во время курса, мы будем обновлять тесты и условия задач. Перед началом каждого семинара, вам нужно
   будет обновлять свою локальную копию репозитория. Если этого не сделать, вы можете потратить
   большое время на разбирательства с багом, который мы уже починили.

2. Настройте своё окружение и решите первую задачу [multiplication](tasks/multiplication).

   У вас есть много вариантов, в чем писать код. Мы рекомендуем использовать CLion/Vim/VSCode/Sublime.
   Для Vim, VSCode и многих прочих редакторов наилучшим решением при работе с C++ является [clangd](https://clangd.llvm.org/).

3. Сдайте тестовое задание в систему.

 - Настройте git (что это такое мы подробно разберём на Missing Semester).
   ```
   git config --global user.name "Vasya Pupkin"
   git config --global user.email vasya@pupkin.ru
   ```

 - Добавьте в git свой приватный репозиторий. Для этого запустите из директории репозитория команду:

   ```
   git remote add student ADDRESS
   ```

   `ADDRESS` нужно скопировать со страницы репозитория (My Repository в интерфейсе https://pilot.cpp-hse.org/). Синяя кнопка Clone -> Clone with SSH.
   Адрес будет вида
   ```
   git@gitlab.com:cpp-pilot-hse-2021/group-Ivan-Ivanov-SuperVanechka1337.git
   ```

## Сдайте первую задачу
 - Перейдите на pilot.cpp-hse.org и выберите задачу из группы [Setup](https://pilot.cpp-hse.org/#Setup). Решите ее.

 - Запустите скрипт посылки из директории с задачей. `python3 ../../submit.py`.

 - Пронаблюдайте за процессом тестирования со страницы CI/CD -> Pipelines своего репозитория. gitlab показывает вывод консоли во время тестирования.

 - Проверьте, что клетка с задачей позеленела на https://pilot.cpp-hse.org.

 - Проверьте, что оценка появилась в таблице с результатами TODO.

## Обновите репозиторий
Периодически мы будем обновлять репозиторий с задачами, поэтому необходимо регулярно выполнять следующие 3 команды из вашего локального репозитория (cpp-pilot-hse):

   ```
   git stash
   git pull
   git stash pop
   ```

## Сохранение решений в приватном репозитории
Запись в репозиторий `cpp-pilot-hse` ограничена, поэтому вы не сможете сохранять в нем ваши решения. Но вы можете загружать решения в свой приватный репозиторий `student` (тот, что My Repository в интерфейсе https://pilot.cpp-hse.org/).

Для этого сформируйте коммит с изменением кода вашей задачи:
```
git add tasks/<task_name>/<task_code>.cpp
git commit -m "update <task_name> code"
```
И отправьте его, **явно указав репозиторий student как точку назначения**:
```
git push --repo=student
```
После этого в веб интерфейсе вашего репозитория можно будет увидеть закоммиченные изменения.
